(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{zrcO:function(e,t,s){"use strict";s.r(t),s.d(t,"UsersModule",(function(){return L}));var r=s("3Pt+"),i=s("ofXK"),n=s("tyNb"),c=s("fXoL");let b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Hb({type:e,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"p-4"],[1,"container"]],template:function(e,t){1&e&&(c.Sb(0,"div",0),c.Sb(1,"div",1),c.Ob(2,"router-outlet"),c.Rb(),c.Rb())},directives:[n.g],encapsulation:2}),e})();var o=s("SxV6"),a=s("J9tS");function u(e,t){if(1&e&&(c.Sb(0,"tr"),c.Sb(1,"td"),c.xc(2),c.Rb(),c.Sb(3,"td"),c.xc(4),c.Rb(),c.Sb(5,"td"),c.xc(6),c.Rb(),c.Rb()),2&e){const e=t.$implicit;c.Bb(2),c.yc(e.firstName),c.Bb(2),c.yc(e.lastName),c.Bb(2),c.yc(e.username)}}function d(e,t){1&e&&(c.Sb(0,"tr"),c.Sb(1,"td",6),c.Ob(2,"span",7),c.Rb(),c.Rb())}let l=(()=>{class e{constructor(e){this.accountService=e,this.users=null}ngOnInit(){this.user=this.accountService.userValue,this.accountService.getAll().pipe(Object(o.a)()).subscribe(e=>this.users=e)}deleteUser(e){const t=this.users.find(t=>t._id===e);t.isDeleting=!0,this.accountService.delete(t._id).pipe(Object(o.a)()).subscribe(()=>{this.users=this.users.filter(t=>t._id!==e)})}}return e.\u0275fac=function(t){return new(t||e)(c.Nb(a.a))},e.\u0275cmp=c.Hb({type:e,selectors:[["app-list"]],decls:20,vars:2,consts:[[1,"table","table-striped"],[2,"width","30%"],[2,"width","10%"],[4,"ngFor","ngForOf"],[4,"ngIf"],["routerLink","/users"],["colspan","4",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(e,t){1&e&&(c.Ob(0,"br"),c.Sb(1,"h1"),c.xc(2,"Users"),c.Rb(),c.Sb(3,"table",0),c.Sb(4,"thead"),c.Sb(5,"tr"),c.Sb(6,"th",1),c.xc(7,"First Name"),c.Rb(),c.Sb(8,"th",1),c.xc(9,"Last Name"),c.Rb(),c.Sb(10,"th",1),c.xc(11,"Username"),c.Rb(),c.Ob(12,"th",2),c.Rb(),c.Rb(),c.Sb(13,"tbody"),c.wc(14,u,7,3,"tr",3),c.wc(15,d,3,0,"tr",4),c.Rb(),c.Rb(),c.Sb(16,"div"),c.Sb(17,"p"),c.Sb(18,"a",5),c.xc(19,"Back"),c.Rb(),c.Rb(),c.Rb()),2&e&&(c.Bb(14),c.jc("ngForOf",t.users),c.Bb(1),c.jc("ngIf",!t.users))},directives:[i.i,i.j,n.e],encapsulation:2}),e})();function f(e,t){1&e&&(c.Sb(0,"h1"),c.xc(1,"Edit User"),c.Rb())}function m(e,t){1&e&&(c.Sb(0,"div"),c.xc(1,"First Name is required"),c.Rb())}function p(e,t){if(1&e&&(c.Sb(0,"div",17),c.wc(1,m,2,0,"div",0),c.Rb()),2&e){const e=c.ec();c.Bb(1),c.jc("ngIf",e.f.firstName.errors.required)}}function h(e,t){1&e&&(c.Sb(0,"div"),c.xc(1,"Last Name is required"),c.Rb())}function S(e,t){if(1&e&&(c.Sb(0,"div",17),c.wc(1,h,2,0,"div",0),c.Rb()),2&e){const e=c.ec();c.Bb(1),c.jc("ngIf",e.f.lastName.errors.required)}}function g(e,t){1&e&&(c.Sb(0,"div"),c.xc(1,"Username is required"),c.Rb())}function v(e,t){if(1&e&&(c.Sb(0,"div",17),c.wc(1,g,2,0,"div",0),c.Rb()),2&e){const e=c.ec();c.Bb(1),c.jc("ngIf",e.f.username.errors.required)}}function R(e,t){1&e&&(c.Sb(0,"em"),c.xc(1,"(Leave blank to keep the same password)"),c.Rb())}function w(e,t){1&e&&(c.Sb(0,"div"),c.xc(1,"Password is required"),c.Rb())}function N(e,t){1&e&&(c.Sb(0,"div"),c.xc(1,"Password must be at least 6 characters"),c.Rb())}function j(e,t){if(1&e&&(c.Sb(0,"div",17),c.wc(1,w,2,0,"div",0),c.wc(2,N,2,0,"div",0),c.Rb()),2&e){const e=c.ec();c.Bb(1),c.jc("ngIf",e.f.password.errors.required),c.Bb(1),c.jc("ngIf",e.f.password.errors.minlength)}}function B(e,t){1&e&&c.Ob(0,"span",18)}const x=function(e){return{"is-invalid":e}};let I=(()=>{class e{constructor(e,t,s,r,i){this.formBuilder=e,this.route=t,this.router=s,this.accountService=r,this.alertService=i,this.loading=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,console.log("add- edit CHECKING:"+this.id),this.isAddMode=!this.id;const e=[r.q.minLength(6)];this.isAddMode&&e.push(r.q.required),this.form=this.formBuilder.group({firstName:["",r.q.required],lastName:["",r.q.required],username:["",r.q.required],password:["",e]}),this.isAddMode||this.accountService.getById(this.id).pipe(Object(o.a)()).subscribe(e=>{this.f.firstName.setValue(e.firstName),this.f.lastName.setValue(e.lastName),this.f.username.setValue(e.username)})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),this.form.invalid||(this.loading=!0,this.isAddMode?this.createUser():this.updateUser())}createUser(){this.accountService.register(this.form.value).pipe(Object(o.a)()).subscribe(e=>{this.alertService.success("User added successfully",{keepAfterRouteChange:!0}),this.router.navigate([".",{relativeTo:this.route}])},e=>{this.alertService.error(e),this.loading=!1})}updateUser(){this.accountService.update(this.id,this.form.value).pipe(Object(o.a)()).subscribe(e=>{this.alertService.success("Update successful",{keepAfterRouteChange:!0}),this.router.navigate(["..",{relativeTo:this.route}])},e=>{this.alertService.error(e),this.loading=!1})}}return e.\u0275fac=function(t){return new(t||e)(c.Nb(r.c),c.Nb(n.a),c.Nb(n.c),c.Nb(a.a),c.Nb(a.b))},e.\u0275cmp=c.Hb({type:e,selectors:[["ng-component"]],decls:31,vars:21,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col"],["for","firstName"],["type","text","formControlName","firstName",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","lastName"],["type","text","formControlName","lastName",1,"form-control",3,"ngClass"],["for","username"],["type","text","formControlName","username",1,"form-control",3,"ngClass"],["for","password"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"form-group"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","/users",1,"btn","btn-link"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(e,t){1&e&&(c.wc(0,f,2,0,"h1",0),c.Sb(1,"form",1),c.ac("ngSubmit",(function(){return t.onSubmit()})),c.Sb(2,"div",2),c.Sb(3,"div",3),c.Sb(4,"label",4),c.xc(5,"First Name"),c.Rb(),c.Ob(6,"input",5),c.wc(7,p,2,1,"div",6),c.Rb(),c.Sb(8,"div",3),c.Sb(9,"label",7),c.xc(10,"Last Name"),c.Rb(),c.Ob(11,"input",8),c.wc(12,S,2,1,"div",6),c.Rb(),c.Rb(),c.Sb(13,"div",2),c.Sb(14,"div",3),c.Sb(15,"label",9),c.xc(16,"Username"),c.Rb(),c.Ob(17,"input",10),c.wc(18,v,2,1,"div",6),c.Rb(),c.Sb(19,"div",3),c.Sb(20,"label",11),c.xc(21," Password "),c.wc(22,R,2,0,"em",0),c.Rb(),c.Ob(23,"input",12),c.wc(24,j,3,2,"div",6),c.Rb(),c.Rb(),c.Sb(25,"div",13),c.Sb(26,"button",14),c.wc(27,B,1,0,"span",15),c.xc(28," Save "),c.Rb(),c.Sb(29,"a",16),c.xc(30,"Cancel"),c.Rb(),c.Rb(),c.Rb()),2&e&&(c.jc("ngIf",!t.isAddMode),c.Bb(1),c.jc("formGroup",t.form),c.Bb(5),c.jc("ngClass",c.mc(13,x,t.submitted&&t.f.firstName.errors)),c.Bb(1),c.jc("ngIf",t.submitted&&t.f.firstName.errors),c.Bb(4),c.jc("ngClass",c.mc(15,x,t.submitted&&t.f.lastName.errors)),c.Bb(1),c.jc("ngIf",t.submitted&&t.f.lastName.errors),c.Bb(5),c.jc("ngClass",c.mc(17,x,t.submitted&&t.f.username.errors)),c.Bb(1),c.jc("ngIf",t.submitted&&t.f.username.errors),c.Bb(4),c.jc("ngIf",!t.isAddMode),c.Bb(1),c.jc("ngClass",c.mc(19,x,t.submitted&&t.f.password.errors)),c.Bb(1),c.jc("ngIf",t.submitted&&t.f.password.errors),c.Bb(2),c.jc("disabled",t.loading),c.Bb(1),c.jc("ngIf",t.loading))},directives:[i.j,r.s,r.k,r.e,r.b,r.j,r.d,i.h,n.e],encapsulation:2}),e})();function O(e,t){1&e&&c.Ob(0,"span",11)}function y(e,t){1&e&&(c.Sb(0,"span"),c.xc(1,"Delete"),c.Rb())}function k(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",6),c.Sb(1,"a",7),c.xc(2,"Edit"),c.Rb(),c.Sb(3,"button",8),c.ac("click",(function(){c.pc(e);const t=c.ec().$implicit;return c.ec().deleteUser(t._id)})),c.wc(4,O,1,0,"span",9),c.wc(5,y,2,0,"span",10),c.Rb(),c.Rb()}if(2&e){const e=c.ec().$implicit;c.Bb(1),c.kc("routerLink","edit/",e._id,""),c.Bb(2),c.jc("disabled",e.isDeleting),c.Bb(1),c.jc("ngIf",e.isDeleting),c.Bb(1),c.jc("ngIf",!e.isDeleting)}}function C(e,t){if(1&e&&(c.Sb(0,"div"),c.wc(1,k,6,4,"div",5),c.Rb()),2&e){const e=t.$implicit,s=c.ec();c.Bb(1),c.jc("ngIf",e.username===s.user.username)}}const q=[{path:"",component:b,children:[{path:"userslist",component:l},{path:"add",component:I},{path:"edit/:id",component:I},{path:"",component:(()=>{class e{constructor(e){this.accountService=e,this.users=null}ngOnInit(){this.user=this.accountService.userValue,this.accountService.getAll().pipe(Object(o.a)()).subscribe(e=>this.users=e)}deleteUser(e){const t=this.users.find(t=>t._id===e);t.isDeleting=!0,this.accountService.delete(t._id).pipe(Object(o.a)()).subscribe(()=>{this.users=this.users.filter(t=>t._id!==e)})}}return e.\u0275fac=function(t){return new(t||e)(c.Nb(a.a))},e.\u0275cmp=c.Hb({type:e,selectors:[["app-user-details"]],decls:21,vars:5,consts:[[1,"p-4"],[1,"container"],[4,"ngFor","ngForOf"],["routerLink","/todo"],["routerLink","userslist"],["style","white-space: nowrap",4,"ngIf"],[2,"white-space","nowrap"],[1,"btn","btn-sm","btn-primary","mr-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger","btn-delete-user",3,"disabled","click"],["class","spinner-border spinner-border-sm",4,"ngIf"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm"]],template:function(e,t){1&e&&(c.Sb(0,"div",0),c.Sb(1,"div",1),c.Sb(2,"h1"),c.xc(3),c.Rb(),c.wc(4,C,2,1,"div",2),c.Ob(5,"br"),c.Sb(6,"h4"),c.xc(7,"Your account details:"),c.Rb(),c.Sb(8,"ul"),c.Sb(9,"li"),c.xc(10),c.Rb(),c.Sb(11,"li"),c.xc(12),c.Rb(),c.Sb(13,"li"),c.xc(14),c.Rb(),c.Rb(),c.Sb(15,"p"),c.Sb(16,"a",3),c.xc(17,"View your todo list"),c.Rb(),c.Rb(),c.Sb(18,"p"),c.Sb(19,"a",4),c.xc(20,"View all Users"),c.Rb(),c.Rb(),c.Rb(),c.Rb()),2&e&&(c.Bb(3),c.zc("Hi ",t.user.firstName,"!"),c.Bb(1),c.jc("ngForOf",t.users),c.Bb(6),c.zc("First Name: ",t.user.firstName,""),c.Bb(2),c.zc("Last Name: ",t.user.lastName,""),c.Bb(2),c.zc("User Name: ",t.user.username,""))},directives:[i.i,n.e,i.j],styles:[""]}),e})()}]}];let U=(()=>{class e{}return e.\u0275mod=c.Lb({type:e}),e.\u0275inj=c.Kb({factory:function(t){return new(t||e)},imports:[[n.f.forChild(q)],n.f]}),e})(),L=(()=>{class e{}return e.\u0275mod=c.Lb({type:e}),e.\u0275inj=c.Kb({factory:function(t){return new(t||e)},imports:[[i.b,r.o,U]]}),e})()}}]);